# http 协议

## 浏览器行为与 http 协议

![http请求模型](./images/http请求模型.png)

- 处理流程

1. 输入网址并回车
2. 解析域名
3. 浏览器发送 http 请求
4. 服务器处理请求
5. 服务器返回 HTML 响应
6. 浏览器处理 HTML 页面
7. 继续请求其他资源

- 发送请求前：先跨越内外网的限制(互联网是外网,家里或者局域网属于内网)路由器或者是家用的猫(遵循一种 ppp 协议)
- 打开浏览器输入网址：将网址翻译成 ip 地址(解析域名),通过 DNS 服务器,找到真正要访问的 IP 地址
- 进行请求后：到了服务器机群,多个服务器共用一个 IP(通过反向代理完成)
- 服务器响应：
- 浏览器收到返回数据：浏览器渲染 HTML 页面

## 什么是 http 协议(超文本传输协议,从 www 服务器传输到本地浏览器的一种传输协议)

![http协议发展](./iamges/http协议发展.png)

- http 协议是由从客户端到服务器的请求和从服务器到客户端的响应进行约束和规范
  ![TCPIP协议栈](./iamges/TCPIP协议栈.png)

1. 应用层：为用户提供所需要的各种服务(HTTP,FTP,DNS,SMTP 等)
2. 传输层：
   - 传输控制协议(TCP)：一种靠谱的协议,只要它负责的就一定会完成
   - 用户数据报协议(UDP)：一种不靠谱协议 ,只负责发送,不管内容发没发到它不管
3. 网络层：解决主机到主机的通信问题
4. 网络接口层：负责监视数据在主机和网络之间的交换

- http 默认端口 80,https 默认端口 443

## HTTP 的工作过程

- 一次 HTTP 操作称为一个事务,其工作过程可分为四步：(事务表示一系列事情是串行完成,其中一步失败,这次操作就算失败)

1. 首先客户端与服务器需要建立连接
2. 建立连接后,客户端发送一个请求给服务器
3. 服务器接到请求后,给予相应的响应信息
4. 客户端接收服务器返回的信息通过浏览器显示在显示屏上(浏览器的渲染),然后客户端与服务器断开连接,如果不断开连接会产生一系列的问题

## 请求和响应

![http请求格式](./iamges/http请求格式.png)

1. HTTP 请求组成：请求行、消息报头、请求正文

- 请求行组成：以一个方法符号开头,后面跟着请求的 URI 和协议版本
  ![http请求组成](./iamges/http请求组成.png)

2. HTTP 响应组成：状态行、消息报头、响应正文

- 状态行组成：服务器 HTTP 协议的版本,服务器返回的响应状态码和状态码的文本描述
  ![http响应组成](./iamges/http响应组成.png)
  ![http响应组成2](./iamges/http响应组成2.png)

-http 是纯文本协议。与之对应的是二进制协议(http2 使用二进制协议)

## 请求方法

1. GET: 请求获取 Request-URI 所标识的资源 (GET 方法不附加请求体)
2. POST: 在 Request-URI 所标识的资源后附加新的数据 (POST 方法会附加请求体)
3. HEAD: 请求获取由 Request-URI 所标识的资源的响应消息报头
4. PUT: 请求服务器存储一个资源，并用 Request-URI 作为其标识
5. DELETE: 请求服务器删除 Request-URI 所标识的资源
6. TRACE: 请求服务器回送收到的请求信息，主要用于测试或诊断
7. CONNECT: HTTP/1.1 协议中预留给能够将连接改为管道方式的代理服务器。
8. OPTIONS: 请求查询服务器的性能，或者查询与资源相关的选项和需求

## HTTP 状态码

1. 1xx:指示信息--表示请求已接收,继续处理
2. 2xx:成功--表示请求已被成功接收、理解、接收
3. 3xx:重定向--要完成请求必须进行更进一步的操作
4. 4xx:客户端错误--请求语法错误或请求无法实现
5. 5xx:服务器错误--服务器未能实现合法的请求

## 常见的请求报头
